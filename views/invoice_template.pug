// This page is adapted from Christos Georgiou's work located at: https://codepen.io/ChristosGeorgiou/pen/WrwxgM
//- Potentially use 3.3.5 vs 3.3.7: maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css

mixin billable_row(billable_item)
  tr
    td= billable_item.description
    td.text-center
      span.mono= billable_item.quantity
    td.text-center
      span.mono= billable_item.unit_price
    td.text-center
      span.mono= billable_item.total_price

doctype html
html(lang='en')
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css')
    link(rel='stylesheet', href='/stylesheets/invoice-style.css')

  body
    div.container.invoice
      div.invoice-header
        div.row
          div.col-xs-7
            h1 Invoice
            h4.text-muted= 'NO: ' + invoice.invoice_number + ' | Date: ' + invoice.invoice_date_formatted
          
          div.col-xs-2.text-right
            img.logo(src='/images/dots-circle.png' alt='Base By Dottie Logo')

          div.col-xs-3
            //- Company-From Logo
            ul.list-unstyled
              li 
                b= business_from.legal_name
              li= 'Commercial Flooring & Finish'
              li= business_from.address_line_1
              li= business_from.address_line_2
          //- The following setup does not allow the image to print due to the
          //- browsers handling of the media css class
          //- div.col-xs-4
          //-   div.media
          //-     div.media-left
          //-       img.media-object.logo(src='/images/tile.jpg' alt='Base By Dottie Logo')
          //- 
          //-     //- Company-From Logo
          //-     ul.media-body.list-unstyled
          //-       li 
          //-         b= business_from.legal_name
          //-       li= 'Commercial Flooring & Finish'
          //-       li= business_from.address_line_1
          //-       li= business_from.address_line_2

                
      div.invoice-body
        div.row
          div.col-xs-6
            div.panel.panel-default
              div.panel-heading
                h3.panel-title= 'Customer Details'
              div.panel-body
                dl.dl-horizontal
                  dt= 'Name'
                  dd
                    b= business_to.legal_name

                  dt= 'Address'
                  dd= business_to.address_line_1
                  dd= business_to.address_line_2

                  if business_to.contact_number
                    dt= 'Phone'
                    dd= business_to.contact_number
                  else
                    br

                  if business_to.email
                    dt= 'Email'
                    dd= business_to.email
                  else
                    br

          div.col-xs-6
            div.panel.panel-default
              div.panel-heading
                h3.panel-title= 'Project Details'
              div.panel-body
                dl.dl-horizontal        
                  dt= 'Name'
                  dd= invoice.project_name
                  
                  dt= 'Address'
                  dd= invoice.project_address_line_1
                  dd= invoice.project_address_line_2
                  
                  dt= 'Job NO.'
                  dd= invoice.project_number

                  dt= 'Completed'
                  dd= invoice.project_date_formatted

        div.panel.panel-default
          div.panel-heading
            h3.panel-title= 'Services'

          table.table.table-bordered.table-condensed
            thead
              tr
                th= 'Item/Details'
                th.text-center.colfix= 'QTY'
                th.text-center.colfix= 'Unit Cost'
                th.text-center.colfix= 'Total Cost'
            tbody
              for billable in billables
                +billable_row(billable)

        div.panel.panel-default
          table.table.table-bordered.table-condensed
            thead
              tr
                td.text-center.col-xs-1= 'Total Cost'
            tbody
              tr
                th.text-center.rowtotal.mono= '$' + invoice.invoice_total

        div.row
          div.col-xs-7
            div.panel.panel-default
              div.panel-body
                i= 'Comments / Notes'
                hr(style='margin: 3px 0 5px')
                if invoice.notes
                  p= invoice.notes

          div.col-xs-5.text-center
            div.panel.panel-default
              div.panel-heading
                h3.panel-title= 'Questions? Contact me!'
              div.panel-body
                p
                  b Dottie Gibbs
                p= '(425) 229-2480'
                p= 'dottie@basebydottie.com'
                //- dd= invoice.project_number
                //- dd= invoice.project_name
                //- dd= invoice.project_address

      div.invoice-footer
        p= 'Please make all checks payable to Base By Dottie LLC.'
        p= 'Thank you for your business!'
